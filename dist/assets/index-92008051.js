(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))u(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&u(c)}).observe(document,{childList:!0,subtree:!0});function o(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function u(e){if(e.ep)return;e.ep=!0;const t=o(e);fetch(e.href,t)}})();const a=document.querySelector("form"),l=document.querySelector("#plat"),d=document.querySelector("#ingrédients"),s=document.querySelector("button"),i=document.querySelector("footer"),f=(n,r="")=>{let o=`Propose moi, avec une introduction sur un ton fantastique, 5 recettes de cuisine détaillée pour un ${n}`;return r.trim()&&(o+=` avec ces ingrédients: ${r}`),o+" !"},p=()=>{i.textContent="Recherche de recettes magiques en cours...",i.setAttribute("aria-busy","true"),s.setAttribute("aria-busy","true"),s.disabled=!0},m=()=>{i.setAttribute("aria-busy","false"),s.setAttribute("aria-busy","false"),s.disabled=!1};a.addEventListener("submit",n=>{n.preventDefault(),p(),fetch("https://api.openai.com/v1/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer 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"},body:JSON.stringify({prompt:f(l.value,d.value),max_tokens:2e3,model:"text-davinci-003"})}).then(o=>o.json()).then(o=>{i.innerHTML=y(o.choices[0].text)}).finally(()=>{m()})});const y=n=>n.split(`
`).map(r=>`<p>${r}</p>`).join("");
